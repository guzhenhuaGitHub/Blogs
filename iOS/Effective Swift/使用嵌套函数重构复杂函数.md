# 使用嵌套函数重构复杂函数
## 嵌套函数
你可以在其他函数的函数体内定义函数，称为嵌套函数。

嵌套函数在默认情况下对外部作用域隐藏，但仍然可以通过其封闭函数调用和使用。 封闭函数也可以返回其嵌套函数之一，以允许嵌套函数在另一个作用域中使用。

您可以重写上面的`chooseStepFunction(backward:)`示例以使用并返回嵌套的函数：
```
func chooseStepFunction(backward: Bool) -> (Int) -> Int {
    func stepForward(input: Int) -> Int { return input + 1 }
    func stepBackward(input: Int) -> Int { return input - 1 }
    return backward ? stepBackward : stepForward
}
var currentValue = -4
let moveNearerToZero = chooseStepFunction(backward: currentValue > 0)
// moveNearerToZero now refers to the nested stepForward() function
while currentValue != 0 {
    print("\(currentValue)... ")
    currentValue = moveNearerToZero(currentValue)
}
print("zero!")
// -4...
// -3...
// -2...
// -1...
// zero!
```
嵌套函数在项目开发中最常见的用途是，当一个函数或方法过长时，可以通过将其中多次重复的代码片段抽取出来，因为该代码片段不适合再放到外部作用域成为一个独立的函数或方法（可能除了这个函数和方法不会再有他人调用），所以定义成嵌套函数，可以使代码更整洁和优雅。

如果觉得我写的还不错，请关注我的微博[@小橘爷](http://weibo.com/yanghaoyu0225)，最新文章即时推送~